# ✨ VibeMeet - Обновленный User Flow

## 🎉 Что изменилось?

VibeMeet теперь работает с централизованной системой авторизации!

### ❌ Старый flow (анонимный):
```
Главная → Ввести имя → Создать комнату → Готово
```

### ✅ Новый flow (с авторизацией):
```
Главная → Войти/Регистрация → Dashboard → Создать комнату → Готово
```

---

## 🚀 Быстрый старт

### 1. Откройте VibeMeet
```
http://localhost
```

### 2. Первый раз? Зарегистрируйтесь!
- Нажмите **"Регистрация"**
- Заполните форму:
  - Имя
  - Email
  - Пароль (минимум 8 символов)
- Готово! Вы на Dashboard

### 3. Уже есть аккаунт? Войдите!
- Нажмите **"Войти"**
- Введите Email и Пароль
- Готово! Вы на Dashboard

### 4. Создайте комнату
- На Dashboard нажмите **"Создать комнату"**
- Вы автоматически попадете в новую комнату
- Скопируйте ссылку и пригласите друзей!

---

## 👥 Гостевой доступ (без регистрации)

Ваши друзья могут присоединиться БЕЗ регистрации:

1. Отправьте им ссылку на комнату:
   ```
   http://localhost/room.html?room=<ID_КОМНАТЫ>
   ```

2. Они откроют ссылку
3. Введут свое имя
4. Готово! Они в комнате на 6 часов

**Гости могут:**
- ✅ Включать микрофон и камеру
- ✅ Писать в чат
- ✅ Делиться экраном
- ❌ Создавать свои комнаты (нужна регистрация)

---

## 🔐 Безопасность

- Все пароли хешируются (bcrypt)
- JWT токены для авторизации
- Access Token: 15 минут
- Refresh Token: 7 дней
- Guest Token: 6 часов

---

## 📱 Новые страницы

### 1. **index.html** - Главная
- Кнопки "Войти" и "Регистрация"
- FAQ обновлен

### 2. **Auth.html** - Вход/Регистрация
- Вкладки для переключения
- Валидация форм
- Интеграция с Auth-сервисом

### 3. **Dashboard.html** - Личный кабинет
- Приветствие с вашим именем
- Кнопка "Создать комнату"
- Кнопка "Войти по ID"
- Кнопка "Выйти"

### 4. **room.html** - Комната (без изменений)
- Работает как раньше
- Теперь с проверкой авторизации

---

## 🎯 Тестовые аккаунты

Для быстрого тестирования:

```
Email: quickstart@test.com
Password: Quick123!@#
```

```
Email: user@test.com
Password: Test123!@#
```

```
Email: admin@test.com
Password: Admin123!@#
```

---

## 🛠️ Технические детали

### Архитектура

```
┌─────────────────┐
│  VibeMeet UI    │ (localhost)
│  (Frontend)     │
└────────┬────────┘
         │
         ├──────────────────┐
         │                  │
         ▼                  ▼
┌─────────────────┐  ┌─────────────────┐
│  Auth-сервис    │  │  VibeMeet API   │
│  (Port 8080)    │  │  (Port 8081)    │
└────────┬────────┘  └────────┬────────┘
         │                    │
         ▼                    ▼
┌─────────────────┐  ┌─────────────────┐
│  Auth DB        │  │  VibeMeet DB    │
│  (Port 5433)    │  │  (Port 5432)    │
└─────────────────┘  └─────────────────┘
```

### API Endpoints

**Auth-сервис (localhost:8080):**
- `POST /auth/register` - Регистрация
- `POST /auth/login` - Вход
- `POST /auth/refresh` - Обновление токена
- `POST /auth/logout` - Выход
- `POST /auth/guest` - Создание гостевой сессии

**VibeMeet API (localhost:8081):**
- `POST /api/v1/rooms` - Создание комнаты (требует JWT)
- `GET /api/v1/rooms/:id` - Получение информации о комнате
- `POST /api/v1/rooms/:id/join` - Присоединение к комнате

---

## 🐛 Troubleshooting

### Не могу войти
- Проверьте, что Auth-сервис запущен (localhost:8080)
- Проверьте email и пароль
- Попробуйте зарегистрироваться заново

### Не могу создать комнату
- Убедитесь, что вы авторизованы
- Проверьте, что VibeMeet API запущен (localhost:8081)
- Проверьте консоль браузера (F12)

### Гость не может присоединиться
- Проверьте, что ссылка правильная
- Убедитесь, что комната существует
- Проверьте, что Auth-сервис запущен

### Токен истек
- Обновите страницу
- Система автоматически обновит токен
- Если не помогло - выйдите и войдите снова

---

## 📚 Дополнительная документация

- [USER_FLOW.md](docs/USER_FLOW.md) - Подробный user flow
- [AUTH_INTEGRATION.md](docs/AUTH_INTEGRATION.md) - Интеграция с Auth-сервисом
- [API_DOCUMENTATION.md](docs/API_DOCUMENTATION.md) - API документация

---

## 🎨 Скриншоты

### Главная страница
- Кнопки "Войти" и "Регистрация"
- Информация о сервисе
- FAQ

### Страница авторизации
- Вкладки "Вход" и "Регистрация"
- Красивые формы
- Валидация в реальном времени

### Dashboard
- Приветствие с именем
- Большая кнопка "Создать комнату"
- Возможность войти по ID

---

**Обновлено:** 2026-01-13

**Вопросы?** Смотрите полную документацию в `docs/USER_FLOW.md`
